!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e="undefined"!=typeof globalThis?globalThis:e||self).mapmostUE=o()}(this,(function(){"use strict";function e(e,o){window.ue.interface[e]=function(t){o&&o(t),window.ue.interface[e]=function(){}}}function o(e,o){window.ue.interface[e]=function(e){o&&o(e)}}function t(e,o){window.ue5(e,o)}function i(e,o,t){window.ue5(e,o,t)}function a(e){alert(e)}function n(e){let o=0;for(let t=0;t<e.length;t++)null!=e.charAt(t).match(/[^\x00-\xff]/gi)?o+=2:o+=1;return o}function l(e){i("Camera",{module:"Camera",subModule:"Interaction",method:"getCameraParameters",data:{}},(function(o){e&&e({location:o.location,rotation:o.rotation,fov:o.fov})}))}return{init:function(){!function(e){let o=document.createElement("script");o.type="text/javascript";try{o.appendChild(document.createTextNode(e))}catch(t){o.text=e}document.body.appendChild(o)}('"object" != typeof ue && (ue = {}), uuidv4 = function () { return "10000000-1000-4000-8000-100000000000".replace(/[018]/g, function (t) { return (t ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> t / 4).toString(16) }) }, ue5 = function (r) { return "object" != typeof ue.interface || "function" != typeof ue.interface.broadcast ? (ue.interface = {}, function (t, e, n, o) { var u, i; "string" == typeof t && ("function" == typeof e && (o = n, n = e, e = null), u = [t, "", r(n, o)], void 0 !== e && (u[1] = e), i = encodeURIComponent(JSON.stringify(u)), "object" == typeof history && "function" == typeof history.pushState ? (history.pushState({}, "", "#" + i), history.pushState({}, "", "#" + encodeURIComponent("[]"))) : (document.location.hash = i, document.location.hash = encodeURIComponent("[]"))) }) : (i = ue.interface, ue.interface = {}, function (t, e, n, o) { var u; "string" == typeof t && ("function" == typeof e && (o = n, n = e, e = null), u = r(n, o), void 0 !== e ? i.broadcast(t, JSON.stringify(e), u) : i.broadcast(t, "", u)) }); var i }(function (t, e) { if ("function" != typeof t) return ""; var n = uuidv4(); return ue.interface[n] = t, setTimeout(function () { delete ue.interface[n] }, 1e3 * Math.max(1, parseInt(e) || 0)), n });'),ue.interface.onFlyToEndListener=function(e){},ue.interface.onMousePickListener=function(e){},ue.interface.onMapStatusChangeListener=function(e){},ue.interface.onPOIClickListener=function(e){},ue.interface.onPOIExpandCollapseListener=function(e){},ue.interface.onMarkerClickListener=function(e){},ue.interface.onPipelineClickListener=function(e){},ue.interface.onRoamIntervalListener=function(e){},ue.interface.onCSectionParamsCallback=function(e){},window.ue5("Tools",{module:"Tools",subModule:"Other",method:"getVersionName",data:{}},(function(e){console.log(`Mapmost for Unreal v${e.versionName} Copyright (c) 2022, 苏州工业园区测绘地理信息有限公司`)}))},allowIdle:function(e){t("Camera",{module:"Camera",subModule:"Interaction",method:"allowIdle",data:{isAllow:e||!1}})},frozenMap:function(e){t("Camera",{module:"Camera",subModule:"Interaction",method:"isFrozen",data:{isFrozen:e.isFrozen||!1,panFrozen:e.panFrozen||!1,rotationFrozen:e.rotationFrozen||!1,pitchFrozen:e.pitchFrozen||!1,zoomFrozen:e.zoomFrozen||!1}})},fullMap:function(){window.ue5("Camera",{module:"Camera",subModule:"Control",method:"fullMap",data:{duration:3}})},focusMap:function(){window.ue5("Camera",{module:"Camera",subModule:"Control",method:"focusMap",data:{duration:3}})},getCameraParameters:l,setInteractionMode:function(e){t("Camera",{module:"Camera",subModule:"Interaction",method:"setInteractionMode",data:{mode:e||"Explorer"}})},allowDecelerationStop:function(e){t("Camera",{module:"Camera",subModule:"Interaction",method:"allowDecelerationStop",data:{isAllow:e||!1}})},flyTo:function(o,i){let{location:a,rotation:n,time:d}=o;l((function(o){e("onFlyToEndListener",i),t("Camera",{module:"Camera",subModule:"Control",method:"flyTo",data:{location:a||o.location,rotation:n||o.rotation,time:d||1.3}})}))},flyToTarget:function(o,i){e("onFlyToEndListener",i),t("Camera",{module:"Camera",subModule:"Control",method:"flyToTarget",data:{targetName:o.targetName,rotation:o.rotation,distance:o.distance,time:o.time}})},interruptFlyTo:function(){t("Camera",{module:"Camera",subModule:"Control",method:"interruptFlyTo",data:{}})},moveForward:function(e){t("Camera",{module:"Camera",subModule:"Control",method:"moveForward",data:{distance:e||0}})},moveRight:function(e){t("Camera",{module:"Camera",subModule:"Control",method:"moveRight",data:{distance:e||0}})},zoom:function(e){t("Camera",{module:"Camera",subModule:"Control",method:"zoom",data:{distance:e||0}})},turnRight:function(e){t("Camera",{module:"Camera",subModule:"Control",method:"turnRight",data:{degree:e||0}})},turnUp:function(e){t("Camera",{module:"Camera",subModule:"Control",method:"turnUp",data:{degree:e||0}})},setOnMousePickListener:function(e){o("onMousePickListener",(function(o){e&&e(o)})),t("Camera",{module:"Camera",subModule:"Event",method:"setOnMousePickListener",data:{}})},removeOnMousePickListener:function(){t("Camera",{module:"Camera",subModule:"Event",method:"removeOnMousePickListener",data:{}}),o("onMousePickListener")},setOnMapStatusChangeListener:function(e){o("onMapStatusChangeListener",(function(o){e&&e(o)})),t("Camera",{module:"Camera",subModule:"Event",method:"setOnMapStatusChangeListener",data:{}})},removeOnMapStateChangeListener:function(e){t("Camera",{module:"Camera",subModule:"Event",method:"removeOnMapStateChangeListener",data:{}}),o("onMapStatusChangeListener",(function(o){e&&e(o)}))},set3DTilesVisibility:function(e,o){t("Layer",{module:"Layer",subModule:"3DTiles",method:"set3DTilesVisibility",data:{id:e,isVisible:o||!1}})},setMapsAnd3DTilesOpacity:function(e){t("Layer",e>=1?{module:"Layer",subModule:"MapSetting",method:"restoreMapsAnd3DTilesOpacity",data:{}}:{module:"Layer",subModule:"MapSetting",method:"setMapsAnd3DTilesOpacity",data:{opacity:e<0?0:e}})},restoreMapsAnd3DTilesOpacity:function(e){t("Layer",{module:"Layer",subModule:"MapSetting",method:"restoreMapsAnd3DTilesOpacity",data:{}})},addTMSLayer:function(e,o){if(e){let{url:i,minimumLevel:a,maximumLevel:n}=o;t("Layer",{module:"Layer",subModule:"TMS",method:"addTMSLayer",data:{url:i,minimumLevel:a||0,maximumLevel:n||22,layerId:e}})}else console.error("id为空")},removeTMSLayer:function(e){t("Layer",{module:"Layer",subModule:"TMS",method:"removeTMSLayer",data:{layerId:e}})},addWMSLayer:function(e,o){if(e){let{baseUrl:i,layers:a,minimumLevel:n,maximumLevel:l}=o;t("Layer",{module:"Layer",subModule:"WMS",method:"addWMS",data:{layerId:e,baseUrl:i,layers:a,minimumLevel:n,maximumLevel:l}})}else console.error("id为空")},removeWMSLayer:function(e){t("Layer",{module:"Layer",subModule:"WMS",method:"removeWMS",data:{layerId:e}})},setAllMapsVisibility:function(e){t("Layer",{module:"Layer",subModule:"MapSetting",method:"setAllMapsVisibility",data:{isVisible:e||!1}})},add3DTiles:function(e,o){window.ue5("Layer",{module:"Layer",subModule:"3DTiles",method:"add3DTilesLayer",data:{id:e,url:o}})},remove3DTiles:function(e){window.ue5("Layer",{module:"Layer",subModule:"3DTiles",method:"remove3DTilesLayer",data:{id:e}})},addWMTSLayer:function(e,o){window.ue5("Layer",{module:"Layer",subModule:"WMTS",method:"addWMTSLayer",data:{layerId:e,baseUrl:o.baseUrl,layer:o.layer,tileMatrixSet:o.tileMatrixSet,style:o.style,format:o.format,minimumLevel:o.minimumLevel,maximumLevel:o.maximumLevel}})},removeWMTSLayer:function(e){window.ue5("Layer",{module:"Layer",subModule:"WMTS",method:"removeWMTSLayer",data:{layerId:e}})},addPOIs:function(e,o,i){if(e&&o){let a,l,d,u,s=[];if(i){let{mainStyle:e,tagStyle:o}=i;{let{property:o,style:t}=e||{};a=o,l=t}{let{property:e,style:t}=o||{};d=e,u=t}}o.features.forEach((e=>{let o=e.properties,{id:t,name:i,detailUrl:r,height:m,heading:c,pitch:h,distance:f,time:p,enableAutoFlyTo:y}=o,g={id:t||"",name:i||"",location:e.geometry.coordinates.concat(m),height:m||0,url:r||"",enableAutoFlyTo:void 0===y||y};if(void 0===c&&void 0===h&&void 0===f&&void 0===p||(g.focusSet={},c&&(g.focusSet.focusZ=c),h&&(g.focusSet.focusY=h),f&&(g.focusSet.focusDistance=100*f),p&&(g.focusSet.time=p||1)),d){let e=o[d];if(e)for(let o=0;o<u.length;o++)if(u[o].value===e){g.desc=e,g.labelSizeWidth=68,u[o].color&&(g.descBgColor=u[o].color||"#929292");break}}if(a){let e=o[a];if(e)for(let o=0;o<l.length;o++)if(l[o].value===e){let{color:e,iconImage:t,iconRotation:i,iconWidth:a,iconHeight:d,subIconImage:u,labelWidth:s,layout:r}=l[o];e&&(g.lineColor=e),t&&(g.iconUrl=t),a&&(g.iconWidth=a),d&&(g.iconHeight=d),u&&(g.subIconUrl=u),void 0!==i&&(g.iconAngle=i),g.labelSizeWidth=s||(g.labelSizeWidth||0)+(10*n(g.name)+(u?88:44)),r&&r.width&&(g.windowSizeWidth=r.width),r&&r.height&&(g.windowSizeHeight=r.height);break}}s.push(g)})),t("Layer",{module:"Layer",subModule:"POI",method:"addPOIs",data:{layerId:e,poidata:s}})}else a("addPOIListLayer输入参数无效，请检查！")},setPOIsVisibility:function(e,o){e?t("Layer",{module:"Layer",subModule:"POI",method:"setPOIsVisibility",data:{layerId:e,isVisible:o||!1}}):a("setPOIsVisibility未输入layerId")},removePOIs:function(e){e?t("Layer",{module:"Layer",subModule:"POI",method:"removePOIs",data:{layerId:e}}):a("removeLayer未输入layerId")},updatePOIs:function(e,o){const i={id:"id",name:"name",location:"location",color:"lineColor",labelWidth:"labelSizeWidth",tag:"desc",tagColor:"descBgColor",iconImage:"iconUrl",subIconImage:"subIconUrl"};t("Layer",{module:"Layer",subModule:"POI",method:"updatePOIs",data:{layerId:e,poiData:o.map((e=>{let o={};return Object.keys(e).forEach((t=>o[i[t]]=e[t])),o}))}})},hasPOIs:function(e,o){e?i("Layer",{module:"Layer",subModule:"POI",method:"hasLayer",data:{layerId:e}},(function(e){o&&o(e)})):o&&o(!1)},showPOIContent:function(e,o){e&&o?t("Layer",{module:"Layer",subModule:"POI",method:"showPOIContent",data:{layerId:e,poiId:o}}):a("showPOIContent参数缺失。")},hidePOIContent:function(e,o){e&&o?t("Layer",{module:"Layer",subModule:"POI",method:"hidePOIContent",data:{layerId:e,poiId:o}}):a("hidePOIContent参数缺失。")},highlightPOI:function(e,o,i){e&&o&&t("Layer",{module:"Layer",subModule:"POI",method:"highlightPOI",data:{layerId:e,poiId:o,color:i.color||"#3399ff"}})},unhighlightPOI:function(e,o){e&&o&&t("Layer",{module:"Layer",subModule:"POI",method:"unhighlight",data:{layerId:e,poiId:o}})},setOnPOIClickListener:function(e){o("onPOIClickListener",(function(o){e&&e(o)}))},removeOnPOIClickListener:function(){o("onPOIClickListener")},setOnPOIExpandCollapseListener:function(e){o("onPOIExpandCollapseListener",(function(o){e&&e(o)}))},removeOnPOIExpandCollapseListener:function(){o("onPOIExpandCollapseListener")},setDistanceOfPOIStatusChange:function(e){let{distanceShowAll:o,distanceShowLineOnly:i}=e;t("Layer",{module:"Layer",subModule:"POI",method:"setDistanceOfPOIStatusChange",data:{distanceShowAll:100*o,distanceShowLineOnly:100*i}})},setPOIFadeOutEffect:function(e){window.ue5("Layer",{module:"Layer",subModule:"POI",method:"setPOIFadeOutEffect",data:{canFadeOut:e}})},setDistanceOfPOIFadeOutEffect:function(e){window.ue5("Layer",{module:"Layer",subModule:"POI",method:"setDistanceOfPOIFadeOutEffect",data:{distance:e.distance,opacity:e.opacity}})},setPOIAvoidance:function(e){window.ue5("Layer",{module:"Layer",subModule:"POI",method:"setPOIAvoidance",data:{canAvoid:e}})},addHeatmap:function(e,o){let i=0,a=999999,n=e.features.map((e=>{let{geometry:o,properties:t}=e,n=t.value||0;return i=Math.max(i,n),a=Math.min(a,n),{lng:o.coordinates[0],lat:o.coordinates[1],value:n}})),{radius:l,range:d,height:u,opacity:s,positionHeight:r}=o;i=d&&d[1]?d[1]:i,a=d&&d[0]?d[0]:a,t("Layer",{module:"Layer",subModule:"Heatmap",method:"addHeatmap",data:{heatmapData:n,minValue:a,maxValue:i,radius:l||20,height:u||1e3,opacity:s||.85,positionHeight:100*r||-1,resolution:o.resolution}})},removeHeatmap:function(){t("Layer",{module:"Layer",subModule:"Heatmap",method:"removeHeatmap",data:{}})},addRoadHeatmap:function(e,o){console.log(o);let i=[],{features:a}=o;for(let e=0;e<a.length;e++){let o=a[e];console.log(o);let t=[];for(let e=0;e<o.geometry.coordinates.length;e++)t.push({x:o.geometry.coordinates[e][0],y:o.geometry.coordinates[e][1],z:0});i.push({Name:o.properties.road_name,ID:o.properties.fid,Condition:o.properties.condition_detail,Width:o.properties.width,Coordinates:t})}t("Layer",{module:"Layer",subModule:"Heatmap",method:"addRoadHeatmap",data:{id:e,roadDatas:i}})},removeRoadHeatmap:function(e){t("Layer",{module:"Layer",subModule:"Heatmap",method:"removeRoadHeatmap",data:{id:e}})},updateRoadHeatmap:function(e,o){let i=[];for(let e=0;e<o.length;e++)i.push({fid:o[e].fid,condition:o[e].condition,condition_random:o[e].condition_detail,width:o[e].width});t("Layer",{module:"Layer",subModule:"Heatmap",method:"updateRoadHeatmap",data:{id:e,roadDatas:i}})},addMarker:function(e,o){let{name:i,type:a,location:n,iconImage:l,bgColor:d,enableAutoFlyTo:u,imageUrl:s,url:r,windowWidth:m,windowHeight:c,showIcon:h,propertyData:f}=o,p={module:"Layer",subModule:"Point",method:"addMarker",data:{}};switch(a){case"window":p.data={id:e,type:"window",location:n,url:r,windowWidth:m||350,windowHeight:c||150,enableAutoFlyTo:void 0===u||u};break;case"propertyList":p.data={id:e,name:i,type:"propertylist",location:n,enableAutoFlyTo:void 0===u||u,propertyData:f};break;case"cleanWindow":p.data={id:e,name:i,type:"cleanWindow",location:n,enableAutoFlyTo:void 0===u||u,url:r,windowWidth:m||350,windowHeight:c||150};break;case"classic":default:p.data={id:e,name:i,type:"classic",location:n,icon:l,isShowIcon:void 0===h||h,enableAutoFlyTo:void 0===u||u,labelBgColor:d||"#668866"},s&&(p.data.imageUrl=s)}t("Layer",p)},removeMarker:function(e){e&&t("Layer",{module:"Layer",subModule:"Point",method:"removeMarker",data:{id:e}})},setOnMarkerClickListener:function(e){o("onMarkerClickListener",(function(o){e&&e(o)}))},removeOnMarkerClickListener:function(){o("onMarkerClickListener")},addEffect:function(e,o){let{location:i,type:a,style:n}=o;n=n||{},"string"==typeof e?t("Layer",{module:"Layer",subModule:"Point",method:"addEffect",data:{id:e,location:i,type:a,style:{radiusOutside:n.radiusOutside||4e3,radiusInside:n.radiusInside||2e3}}}):console.log("addEffect参数错误")},removeEffect:function(e){t("Layer",{module:"Layer",subModule:"Point",method:"removeEffect",data:{id:e}})},setMarkerVisibility:function(e,o){t("Layer",{module:"Layer",subModule:"Point",method:"setMarkerVisibility",data:{id:e,visible:o}})},addPolyline:function(e,o){if(e.features){let{color:i,type:a,arrowCount:n}=o||{};e.features.forEach((e=>{let o=[];o="MultiLineString"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates;let l=o.map((o=>({location:o.concat(e.properties.height||0)})));t("Layer",{module:"Layer",subModule:"Line",method:"addPolyline",data:{type:a||"static",points:l,color:i||"#66cc66",arrowNumber:n||20}})}))}},removePolyline:function(){t("Layer",{module:"Layer",subModule:"Line",method:"removePolyline",data:{}})},addFlyLine:function(e){let{fromPoint:o,toPoint:i}=e;t("Layer",{module:"Layer",subModule:"Line",method:"addFlyLine",data:{fromPoint:o,toPoint:i}})},removeFlyLine:function(e){t("Layer",{module:"Layer",subModule:"Line",method:"removeFlyLine",data:{}})},addPolygon:function(e,o,i){if(o.features){let{color:a}=i||{};for(let i=0;i<o.features.length;i++){let n=o.features[i],l=[];if("Polygon"===n.geometry.type){l=n.geometry.coordinates;let o=[],d=[],u=0;for(let e=0;e<l.length;e++){e>0&&o.push({index:u});let t=l[e],i=t.map((e=>({lng:e[0],lat:e[1]})));d=d.concat(i),u+=t.length}t("Layer",{module:"Layer",subModule:"Fill",method:"addPolyGon",data:{id:e+"-"+i,color:a||"#291fba",height:n.properties.height||0,coordinates:d,holeIndices:o}})}else if("MultiPolygon"===n.geometry.type){l=n.geometry.coordinates;for(let o=0;o<l.length;o++){let d=[],u=[],s=0;if(l[o].length>1){for(let e=0;e<l[o].length;e++){let t=l[o][e],i=t.map((e=>({lng:e[0],lat:e[1]})));d.push({index:s}),u=u.concat(i),s+=t.length}t("Layer",{module:"Layer",subModule:"Fill",method:"addPolyGon",data:{id:e+"-"+i+"-"+o,color:a||"#291fba",height:n.properties.height||0,coordinates:u,holeIndices:d}})}else{let d=[],u=[],s=l[o][0].map((e=>({lng:e[0],lat:e[1]})));u=u.concat(s),t("Layer",{module:"Layer",subModule:"Fill",method:"addPolyGon",data:{id:e+"-"+i+"-"+o,color:a||"#291fba",height:n.properties.height||0,coordinates:u,holeIndices:d}})}}}}}},removePolygon:function(e){t("Layer",{module:"Layer",subModule:"Fill",method:"removePolyGon",data:{id:e}})},updatePolygon:function(e,o){let{color:i}=o||{};e&&i?t("Layer",{module:"Layer",subModule:"Fill",method:"updatePolyGon",data:{id:e,color:i}}):console.log("updatePolygon参数缺失请检查")},addFencing:function(e,o,i){if(o.features){let{extrudeHeight:a,extrudeColor:n,groundColor:l}=i||{};for(let i=0;i<o.features.length;i++){let d=o.features[i],u=[];if("Polygon"===d.geometry.type){u=d.geometry.coordinates;let o=[],s=[],r=0;for(let e=0;e<u.length;e++){e>0&&o.push({index:r});let t=u[e],i=t.map((e=>({lng:e[0],lat:e[1]})));s=s.concat(i),r+=t.length}t("Layer",{module:"Layer",subModule:"FillExtrusion",method:"addFencing",data:{id:e+"-"+i,height:d.properties.height||0,extrudeHeight:a||0,extrudeColor:n||"#291fba",groundColor:l||"#66b4cc",coordinates:s,holeIndices:o}})}else if("MultiPolygon"===d.geometry.type){u=d.geometry.coordinates;for(let o=0;o<u.length;o++){let s=[],r=[],m=0;if(u[o].length>1){for(let e=0;e<u[o].length;e++){let t=u[o][e],i=t.map((e=>({lng:e[0],lat:e[1]})));s.push({index:m}),r=r.concat(i),m+=t.length}t("Layer",{module:"Layer",subModule:"FillExtrusion",method:"addFencing",data:{id:e+"-"+i+"-"+o,height:d.properties.height||0,extrudeHeight:a||0,extrudeColor:n||"#291fba",groundColor:l||"#66b4cc",coordinates:r,holeIndices:s}})}else{let s=[],r=[],m=u[o][0].map((e=>({lng:e[0],lat:e[1]})));r=r.concat(m),t("Layer",{module:"Layer",subModule:"FillExtrusion",method:"addFencing",data:{id:e+"-"+i+"-"+o,height:d.properties.height||0,extrudeHeight:a||0,extrudeColor:n||"#291fba",groundColor:l||"#66b4cc",coordinates:r,holeIndices:s}})}}}}}},removeFencing:function(e){t("Layer",{module:"Layer",subModule:"FillExtrusion",method:"removeFencing",data:{id:e}})},updateFencing:function(e,o){e?t("Layer",{module:"Layer",subModule:"FillExtrusion",method:"updateFencing",data:{id:e,...o||{}}}):console.log("updateFencing缺少id")},addFencingGradientEffect:function(e,o,t){!function(i){let a=i.features[0].geometry.coordinates[0],n=o.features[0],l=[],d=[],u=0;for(let e=0;e<a.length;e++){0!==e&&d.push(u);let o=a[e];for(let e=0;e<o.length;e++)l.push(o[e]),u++}let s=l.map((e=>({lng:e[0],lat:e[1]}))),r=d.map((e=>({index:e})));window.ue5("Layer",{module:"Layer",subModule:"FillExtrusion",method:"addFencingGradientEffect",data:{id:e,height:n.properties.height||0,extrudeHeight:t.extrudeHeight,extrudeColor:t.extrudeColor,groundColor:t.groundColor,coordinates:s,holeIndices:r}})}(o)},removeFencingGradientEffect:function(e){window.ue5("Layer",{module:"Layer",subModule:"FillExtrusion",method:"removeFencingGradientEffect",data:{id:e}})},addFencingMovingLEffect:function(e,o,t){!function(i){let a=i.features[0].geometry.coordinates[0],n=o.features[0],l=[],d=[],u=0;for(let e=0;e<a.length;e++){0!==e&&d.push(u);let o=a[e];for(let e=0;e<o.length;e++)l.push(o[e]),u++}let s=l.map((e=>({lng:e[0],lat:e[1]}))),r=d.map((e=>({index:e})));window.ue5("Layer",{module:"Layer",subModule:"FillExtrusion",method:"addFencingMovingLEffect",data:{id:e,height:n.properties.height||0,extrudeHeight:t.extrudeHeight,extrudeColor:t.extrudeColor,groundColor:t.groundColor,coordinates:s,holeIndices:r}})}(o)},removeFencingMovingLEffect:function(e){window.ue5("Layer",{module:"Layer",subModule:"FillExtrusion",method:"removeFencingMovingLEffect",data:{id:e}})},addFencingMovingVEffect:function(e,o,t){!function(i){let a=i.features[0].geometry.coordinates[0],n=o.features[0],l=[],d=[],u=0;for(let e=0;e<a.length;e++){0!==e&&d.push(u);let o=a[e];for(let e=0;e<o.length;e++)l.push(o[e]),u++}let s=l.map((e=>({lng:e[0],lat:e[1]}))),r=d.map((e=>({index:e})));window.ue5("Layer",{module:"Layer",subModule:"FillExtrusion",method:"addFencingMovingVEffect",data:{id:e,height:n.properties.height||0,extrudeHeight:t.extrudeHeight,extrudeColor:t.extrudeColor,groundColor:t.groundColor,coordinates:s,holeIndices:r}})}(o)},removeFencingMovingVEffect:function(e){window.ue5("Layer",{module:"Layer",subModule:"FillExtrusion",method:"removeFencingMovingVEffect",data:{id:e}})},addTexts:function(e,o){const{height:i}=o||{};t("Layer",{module:"Layer",subModule:"Text",method:"addTexts",data:{textData:e.features,height:i||1}})},removeTexts:function(){t("Layer",{module:"Layer",subModule:"Text",method:"removeTexts",data:{}})},setTextAvoidance:function(e){t("Layer",{module:"Layer",subModule:"Text",method:"setTextAvoidance",data:{canAvoid:void 0===e||e}})},addModel:function(e,o){let{type:i,location:a,rotation:n}=o;"string"==typeof e?t("Layer",{module:"Layer",subModule:"Model",method:"addModel",data:{id:e,type:i,location:a,rotation:n}}):console.log("请检查参数，缺少必要值！")},removeModel:function(e){t("Layer",{module:"Layer",subModule:"Model",method:"removeModel",data:{id:e}})},updateModel:function(e,o){let{location:i,rotation:a}=o;t("Layer",{module:"Layer",subModule:"Model",method:"updateModel",data:{id:e,location:i,rotation:a}})},addVideoFusion:function(e){let{id:o,cameraPosition:i,fov:a,cameraRotation:n,url:l,videoSize:d,far:u,opacity:s}=e;t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"VideoFusion",method:"addVideoFusion",data:{id:o||"videoProjectorTest",cameraPosition:i,cameraRotation:n,url:l,videoSize:d,far:u,fov:a,opacity:s}})},removeVideoFusion:function(e){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"VideoFusion",method:"removeVideoFusion",data:{id:e||"videoProjectorTest"}})},startMeasureDistanceContinuation:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Measure",method:"startMeasureDistanceContinuation",data:{}})},stopMeasureDistanceContinuation:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Measure",method:"stopMeasureDistanceContinuation",data:{}})},startMeasureDistanceTriangulation:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Measure",method:"startMeasureDistanceTriangulation",data:{}})},stopMeasureDistanceTriangulation:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Measure",method:"stopMeasureDistanceTriangulation",data:{}})},startMeasureAreaContinuation:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Measure",method:"startMeasureAreaContinuation",data:{}})},stopMeasureAreaContinuation:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Measure",method:"stopMeasureAreaContinuation",data:{}})},startMeasureAreaProjection:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Measure",method:"startMeasureAreaProjection",data:{}})},stopMeasureAreaProjection:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Measure",method:"stopMeasureAreaProjection",data:{}})},startClip:function(o){e("onClipBoxAdded",o),t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Clip",method:"startClip",data:{}})},stopClip:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Clip",method:"stopClip",data:{}})},addClipBox:function(e){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Clip",method:"addClipBox",data:{location:e.location,rotation:e.rotation,length:e.length,width:e.width,height:e.height}})},removeClipBox:function(){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Clip",method:"removeClipBox",data:{}})},setOnClipAreaChangedListener:function(e){o("onClipAreaChanged",(function(o){e&&e(o)})),t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Clip",method:"setOnClipAreaChanged",data:{}})},removeOnClipAreaChangedListener:function(e){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"Clip",method:"removeOnClipAreaChanged",data:{}}),o("onClipAreaChanged",(function(o){e&&e(o)}))},addViewshedAnalysis:function(e){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"ViewshedAnalysis",method:"addViewshedAnalysis",data:e})},removeViewshedAnalysis:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"ViewshedAnalysis",method:"removeViewshedAnalysis",data:{}})},startViewshedAnalysis:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"ViewshedAnalysis",method:"startViewshedAnalysis",data:{}})},stopViewshedAnalysis:function(){t("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"ViewshedAnalysis",method:"stopViewshedAnalysis",data:{}})},startSightLineAnalysis:function(){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"SightLine",method:"startSightLineAnalysis",data:{}})},stopSightLineAnalysis:function(){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"SightLine",method:"stopSightLineAnalysis",data:{}})},addLimitHeightAnalysis:function(e){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"LimitHeight",method:"addLimitHeightAnalysis",data:{location:e.location,degree:e.degree,sideLength:e.sideLength}})},removeLimitHeightAnalysis:function(){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"LimitHeight",method:"removeLimitHeightAnalysis",data:{}})},startLimitHeightAnalysis:function(){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"LimitHeight",method:"startLimitHeightAnalysis",data:{}})},stopLimitHeightAnalysis:function(){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"LimitHeight",method:"stopLimitHeightAnalysis",data:{}})},startSkyLineAnalysis:function(){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"SkyLine",method:"startSkyLineAnalysis",data:{}})},stopSkyLineAnalysis:function(){window.ue5("SpatialAnalysis",{module:"SpatialAnalysis",subModule:"SkyLine",method:"stopSkyLineAnalysis",data:{}})},startMapRoam:function(e,i){e.length>1&&(o("onRoamIntervalListener",i||function(){}),t("Tools",{module:"Tools",subModule:"MapRoam",method:"startMapRoam",data:{mapRoamData:e.map(((o,t)=>{let{location:i,rotation:a,direction:n,time:l}=o;if(n&&t>0){let o=a[2]-e[t-1].rotation[2];switch(n){case"left":o>0&&(a[2]=a[2]-360);break;case"right":o<0&&(a[2]=a[2]+360)}}return{location:i,rotation:a,time:l}}))}}))},pauseMapRoam:function(){t("Tools",{module:"Tools",subModule:"MapRoam",method:"pauseMapRoam",data:{}})},continueMapRoam:function(){t("Tools",{module:"Tools",subModule:"MapRoam",method:"continueMapRoam",data:{}})},stopMapRoam:function(){o("onRoamIntervalListener",(function(){})),t("Tools",{module:"Tools",subModule:"MapRoam",method:"stopMapRoam",data:{}})},startScreenSplit:function(){t("Tools",{module:"Tools",subModule:"PlanCompare",method:"startPlanCompare",data:{}})},stopScreenSplit:function(){t("Tools",{module:"Tools",subModule:"PlanCompare",method:"stopPlanCompare",data:{}})},quit:function(){t("Tools",{module:"Tools",subModule:"Other",method:"quit",data:{}})},highlightModel:function(e){t("Tools",{module:"Tools",subModule:"VisualEffect",method:"highlightModel",data:{modelName:e}})},unhighlightModel:function(e){t("Tools",{module:"Tools",subModule:"VisualEffect",method:"unhighlightModel",data:{modelName:e}})},setCompassVisibility:function(e){t("Tools",{module:"Tools",subModule:"Compass",method:"setCompassVisibility",data:{isVisible:e}})},setCompassLayout:function(e){let{offsetX:o,offsetY:i}=e;t("Tools",{module:"Tools",subModule:"Compass",method:"setCompassLayout",data:{offsetX:o||0,offsetY:i||0}})},addPipeline:function(e,o,t){window.ue5("PipeLine",{module:"PipeLine",subModule:"VisualEffect",method:"addPipeline3DTiles",data:{id:e,pipeType:o,url:t}})},removePipeline:function(e){window.ue5("PipeLine",{module:"PipeLine",subModule:"VisualEffect",method:"removePipeline3DTiles",data:{id:e}})},setOnPipelineClickListener:function(e){o("onPipelineClickListener",(function(o){e&&e(o)})),t("PipeLine",{module:"PipeLine",subModule:"Event",method:"setOnPipeClickListener",data:{}})},removeOnPipelineClickListener:function(){t("PipeLine",{module:"PipeLine",subModule:"Event",method:"removePipeClickListener",data:{}}),o("onPipelineClickListener",(function(e){}))},highlightPipeline:function(e){t("PipeLine",{module:"PipeLine",subModule:"VisualEffect",method:"highlightPipeline",data:e})},unhighlightPipeline:function(){t("PipeLine",{module:"PipeLine",subModule:"VisualEffect",method:"unhighlightPipeline",data:{}})},setPipelineLayerVisibility:function(e,o){t("PipeLine",{module:"PipeLine",subModule:"VisualEffect",method:"setPipelineLayerVisibility",data:{pipelineType:e,isVisible:o}})},drawPipelineDirection:function(e){t("PipeLine",{module:"PipeLine",subModule:"VisualEffect",method:"drawPipelineDirection",data:e})},clearPipelineDirection:function(){t("PipeLine",{module:"PipeLine",subModule:"VisualEffect",method:"clearPipelineDirection",data:{}})},startCSectionAnalysis:function(e){o("onCSectionParamsCallback",(function(o){e&&e(o)})),t("PipeLine",{module:"PipeLine",subModule:"Analysis",method:"startCSectionAnalysis",data:{}})},stopCSectionAnalysis:function(){t("PipeLine",{module:"PipeLine",subModule:"Analysis",method:"stopCSectionAnalysis",data:{}}),o("onCSectionParamsCallback")},getVersionName:function(e){i("Tools",{module:"Tools",subModule:"Other",method:"getVersionName",data:{}},(function(o){e&&e(o.versionName)}))},screenshot:function(e){window.ue5("Tools",{module:"Tools",subModule:"Other",method:"screenshot",data:{}},(function(o){e&&e(o.FilePath)}))},startBuildingGrowth:function(e){window.ue5("Tools",{module:"Tools",subModule:"BuildingGrowth",method:"startBuildingGrowth",data:{modelName:e}})},pauseBuildingGrowth:function(e){window.ue5("Tools",{module:"Tools",subModule:"BuildingGrowth",method:"pauseBuildingGrowth",data:{modelName:e}})},continueBuildingGrowth:function(e){window.ue5("Tools",{module:"Tools",subModule:"BuildingGrowth",method:"continueBuildingGrowth",data:{modelName:e}})},stopBuildingGrowth:function(e){window.ue5("Tools",{module:"Tools",subModule:"BuildingGrowth",method:"stopBuildingGrowth",data:{modelName:e}})},setBuildingGrowthProgress:function(e){window.ue5("Tools",{module:"Tools",subModule:"BuildingGrowth",method:"setBuildingGrowthProgress",data:{modelName:e.modelName,progress:e.progress}})},setBuildingToCertainFloor:function(e){window.ue5("Tools",{module:"Tools",subModule:"BuildingGrowth",method:"setBuildingToCertainFloor",data:{modelName:e.modelName,floorNumber:e.floorNumber}})},addCrystalEffect:function(e){window.ue5("Tools",{module:"Tools",subModule:"VisualEffect",method:"addCrystalEffect",data:{centerLocation:e.centerLocation,radius:e.radius,color:e.color}})},removeCrystalEffect:function(){window.ue5("Tools",{module:"Tools",subModule:"VisualEffect",method:"removeCrystalEffect",data:{}})},addSweepingEffect:function(e,o){window.ue5("Tools",{module:"Tools",subModule:"VisualEffect",method:"addSweepingEffect",data:{id:e,centerLocation:o.centerLocation,radius:o.radius,width:o.width,color:o.color}})},removeSweepingEffect:function(e){window.ue5("Tools",{module:"Tools",subModule:"VisualEffect",method:"removeSweepingEffect",data:{id:e}})},setMinimapVisibility:function(e){window.ue5("Tools",{module:"Tools",subModule:"Minimap",method:"setMinimapVisibility",data:{isVisible:e}})},highlightPartly:function(e,o){window.ue5("Tools",{module:"Tools",subModule:"VisualEffect",method:"highlightPartly",data:{id:e,location:o.location,rotation:o.rotation,length:o.length,width:o.width,height:o.height}})},unhighlightPartly:function(e){window.ue5("Tools",{module:"Tools",subModule:"VisualEffect",method:"unhighlightPartly",data:{id:e}})},customFunction:function(e){t("CustomFunction",{functionName:e.functionName,params:e.params})},customFunctionWithCallback:function(e,o){i("CustomFunction",{functionName:e.functionName,params:e.params},(function(e){o&&o(e)}))}}}));
